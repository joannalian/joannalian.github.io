<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>我的個人頁面 · 職涯時間軸</title>
  <style>
    :root {
      --bg:#0b1020;
      --card:#0f172a;
      --fg:#e2e8f0;
      --muted:#94a3b8;
      --border:#1f2937;
      --primary:#6366f1;
    }
    * { box-sizing: border-box; }
    html, body { margin:0; padding:0; background:var(--bg); color:var(--fg); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, "Apple Color Emoji","Segoe UI Emoji"; }
    a { color: inherit; text-decoration: none; }
    .wrap { max-width: 72rem; margin: 0 auto; padding: 1rem; }
    header.top { display:flex; align-items:center; justify-content:space-between; gap:.75rem; padding:.75rem 0 1rem; }
    .brand { font-weight:800; letter-spacing:.2px; }
    nav .tab { display:inline-flex; align-items:center; gap:.4rem; font-weight:600; color:var(--muted); padding:.4rem .75rem; border-radius:.6rem; cursor:pointer; }
    nav .tab.active { color:var(--fg); background: rgba(255,255,255,.06); }
    .hidden { display:none !important; }

    /* timeline base */
    .topbar { position:fixed; left:0; top:0; height:3px; width:100%; transform-origin:left; scale:0; background:linear-gradient(90deg,#6366f1,#e879f9,#10b981); z-index:40; }
    .timeline { position:relative; }
    .spine { position:absolute; left:12px; top:0; bottom:0; width:2px; background:#1f2937; }
    .spineGlow { position:absolute; left:12px; top:0; width:2px; transform-origin:top;
      background:linear-gradient(180deg,#6366f1,#22c55e);
      filter: drop-shadow(0 0 10px rgba(56,189,248,.5));
    }
    .marker { position:absolute; left:12px; top:0; transform:translate(-50%,-50%); pointer-events:none; }
    .marker .b { position:relative; width:40px; height:40px; }
    .marker .b .g1 { position:absolute; inset:-28px; background:rgba(56,189,248,.25); border-radius:999px; filter:blur(24px) }
    .marker .b .g2 { position:absolute; inset:-20px; background:rgba(232,121,249,.25); border-radius:999px; filter:blur(18px) }
    .marker .b .g3 { position:absolute; inset:-12px; background:rgba(139,92,246,.30); border-radius:999px; filter:blur(12px) }
    .marker .b .core { position:absolute; inset:0; border-radius:999px; background:rgba(255,255,255,.9); border:1px solid rgba(2,6,23,.2); box-shadow:0 2px 8px rgba(2,6,23,.25) }
    .marker .b .dot { position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:8px; height:8px; border-radius:999px; background:#7c3aed }
    .yearRow { display:grid; grid-template-columns:24px 1fr; align-items:center; gap:.75rem; margin:1.25rem 0 .5rem }
    .year { background:rgba(99,102,241,.15); color:#a5b4fc; font-weight:700; border-radius:999px; padding:.25rem .75rem; font-size:.9rem; justify-self:center }
    .yearRow .line { height:1px; background:var(--border) }
    ul.events { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:1.25rem }
    li.item { display:grid; grid-template-columns:24px 1fr; align-items:start; gap:.75rem }
    .dot { width:36px; height:36px; border-radius:999px; background:var(--card); box-shadow:0 2px 6px rgba(0,0,0,.35); border:2px solid rgba(99,102,241,.7); display:grid; place-items:center; position:relative }
    .dot:after { content:""; position:absolute; inset:-6px; border-radius:999px; background:rgba(99,102,241,.35); filter:blur(7px); opacity:.75; animation:pulse 1.6s ease-out 1 }
    @keyframes pulse { 0%{transform:scale(.95)} 50%{transform:scale(1.15);opacity:.25} 100%{transform:scale(1);opacity:0} }
    .card { position:relative; border:1px solid var(--border); border-radius:1rem; background:rgba(15,23,42,.86); padding:1rem; overflow:hidden }
    .card:before { content:""; position:absolute; inset:0; opacity:.75; background:
      radial-gradient(800px 400px at 20% 0%, rgba(99,102,241,.12), transparent 40%),
      radial-gradient(700px 350px at 80% 10%, rgba(168,85,247,.12), transparent 42%),
      radial-gradient(900px 450px at 20% 100%, rgba(34,197,94,.12), transparent 45%);
      pointer-events:none }
    .title { font-weight:800; margin:0 0 .15rem 0 }
    .meta { color:var(--muted); font-size:.9rem; margin:.1rem 0 .5rem }
    .desc { color:#cbd5e1; font-size:.92rem; line-height:1.6; margin:.5rem 0 0; white-space:pre-line }
    .tags { display:flex; flex-wrap:wrap; gap:.25rem .35rem; margin-left:auto }
    .tag { border:1px solid var(--border); border-radius:999px; padding:.1rem .5rem; font-size:.75rem; background:#0b1324 }
    .panel { padding: 1rem 0 2rem; }
    .toolbar { display:flex; align-items:center; gap:.5rem; color:var(--muted); }
    .toggle { position:relative; display:inline-flex; width:44px; height:24px; border-radius:999px; background:#64748b; cursor:pointer; transition:.2s }
    .toggle[data-on="true"] { background:#6366f1 }
    .toggle .knob { position:absolute; top:3px; left:3px; width:18px; height:18px; border-radius:999px; background:#fff; transition: transform .22s }
    .toggle[data-on="true"] .knob { transform: translateX(20px) }

    .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }
  </style>
</head>
<body>
  <div class="topbar" aria-hidden="true"></div>
  <div class="wrap">
    <header class="top">
      <div class="brand">My Profile</div>
      <nav>
        <a class="tab active" data-tab="current" onclick="setActive('current')">目前</a>
        <a class="tab" data-tab="skills" onclick="setActive('skills')">技能</a>
        <a class="tab" data-tab="achievements" onclick="setActive('achievements')">成果</a>
        <a class="tab" data-tab="timeline" onclick="setActive('timeline')">時間軸</a>
      </nav>
    </header>

    <section id="panel-current" class="panel">
      <h2>目前</h2>
      <p class="meta">這裡放你的簡介或最新近況。</p>
    </section>

    <section id="panel-skills" class="panel hidden">
      <h2>技能</h2>
      <p class="meta">React / TypeScript / SAP / BI / …</p>
    </section>

    <section id="panel-achievements" class="panel hidden">
      <h2>成果</h2>
      <ul>
        <li>專案 A…</li>
        <li>專案 B…</li>
      </ul>
    </section>

    <!-- Timeline Panel -->
    <section id="panel-timeline" class="panel hidden">
      <div class="toolbar" style="margin-bottom:.75rem;">
        <span>時序</span>
        <button id="orderToggle" class="toggle" data-on="false" aria-pressed="false" aria-label="切換時序：順序/倒序">
          <span class="knob"></span>
        </button>
        <span id="orderLabel">順序</span>
      </div>

      <section id="timeline" class="timeline" aria-label="職涯時間軸">
        <div class="spine" aria-hidden="true"></div>
        <div class="spineGlow" style="height:0" aria-hidden="true"></div>
        <div class="marker" aria-hidden="true">
          <div class="b">
            <div class="g1"></div><div class="g2"></div><div class="g3"></div>
            <div class="core"></div><div class="dot"></div>
          </div>
        </div>
        <div id="timeline-content"></div>
      </section>
    </section>
  </div>

  <script>
  // Tabs + lazy mount
  const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
  let __timelineMounted = false;
  function setActive(tab){
    $$(".tab").forEach(t=>t.classList.toggle("active", t.dataset.tab===tab));
    ["current","skills","achievements","timeline"].forEach(id=>{
      const p = document.getElementById("panel-"+id);
      p.classList.toggle("hidden", id!==tab);
    });
    if (tab === "timeline") {
      if (!__timelineMounted) { renderTimeline(); __timelineMounted = true; }
      else { window.dispatchEvent(new Event("resize")); window.dispatchEvent(new Event("scroll")); }
    }
    document.getElementById("panel-"+tab).scrollIntoView({behavior:"smooth", block:"start"});
  }
  </script>

  <script>
  // Top progress bar
  const topbar = document.querySelector('.topbar');
  const docHeight = () => Math.max(document.body.scrollHeight, document.documentElement.scrollHeight) - innerHeight;
  function updateTopbar(){
    const p = Math.max(0, Math.min(1, scrollY / Math.max(1, docHeight())));
    topbar.style.transform = `scaleX(${p})`;
  }
  addEventListener('scroll', updateTopbar, {passive:true});
  addEventListener('resize', updateTopbar);
  updateTopbar();
  </script>

  <script>
  // ===== Timeline renderer (no framework) =====
  const DATA = [{"id": "1", "date": "2014-01-01", "title": "資訊管理系畢業", "org": "國立雲林科技大學", "type": "education"}, {"id": "2", "date": "2014-01-01", "title": "資訊專員", "org": "中良工業股份有限公司", "type": "job", "description": "Agentflow、Moodle教學平台架設與維護", "highlights": ["獨立開發: 入職後約3個月可獨立開發完整BPM專案流程至產出", "跨領域開發:結合開發BPM專案，可自APP紀錄資料自動傳送至BPM簽核。"]}, {"id": "3", "date": "2016-01-01", "title": "SAP工程師", "org": "中良工業股份有限公司", "type": "job", "description": "負責台灣廠區SAP-FI財務模組導入及維運", "highlights": ["大量開發FI相關報表包含應收AR、應付AP、固定資產FA、總帳GL及月結、年結所需相關報表。", "跨模組開發-MM採購與庫存模組: 優化採購與庫存流程，有效節省採購/倉會人員用於查詢報表的時間避免錯誤資料。", "跨模組開發-PP生產模組&MM採購與庫存模組: 生產線上流程優化-工單自動發料", "財務分析表-依據公開資訊觀測站/採IFRSs後，提供一份與上市櫃公司等同之財務分析。"]}, {"id": "4", "date": "2019-01-01", "title": "SAP工程師", "org": "中良工業股份有限公司", "type": "job", "description": "1.負責台灣廠區SAP-FI財務模組及CO成本模組導入及維運\n2.負責越南廠區SAP-FI財務模組導入及維運", "highlights": ["獨立開發越南區SAP導入-FI模組發票系統GUI-VAT，產出相關表單、發票等皆符合當地稅法規定，依台灣導入經驗開發此系統約節省成本約150-200萬效益", "越南區SAP導入-三角貿易流程梳理負責人: 整合SD銷售模組/MM採購與庫存模組/FI財務模組 三大模組，提供三角貿易與境外公司之公司間交易Solution的系統建議。", "跨模組-SD銷售模組: 負責信用額度功能上線，以顧問角色執行此專案，包含後台IMG設定、系統教育訓練、劇本測試等。"]}, {"id": "5", "date": "2022-01-01", "title": "課長", "org": "中良工業股份有限公司", "type": "promotion", "description": "1.負責台灣廠區SAP-FI財務模組及CO成本模組導入及維運\n2.負責越南廠區SAP-FI財務模組導入及維運", "highlights": ["第三次SAP導入(越南新廠)-雙模組職責: 負責FI財務+CO成本模組導入。", "BI領域開發: 跨鼎新、文中、SAP系統整合各財務系統，做資料分析及擷取整合，開發產出集團內所有子公司整合之財報(損益表)。", "晉升課長，管理SAP Team"]}, {"id": "6", "date": "2022-01-01", "title": "經理", "org": "以恩資訊股份有限公司", "type": "job", "description": "Saas模式排程軟體導入專案經理", "highlights": ["新創企業開創期的成功案例: 在資源、知識背景皆尚未穩定時，完成第一個成功導入案例，於3個月內完成資料介接並導入系統，再...，提升庫存周轉率5%、生產Lead Time下降25%(38天下降至10天)、換模時間下降15%(180分鐘下降至153分鐘)。"]}, {"id": "7", "date": "2024-01-01", "title": "經理", "org": "以恩資訊股份有限公司", "type": "job", "description": "1.Saas模式排程軟體導入專案經理\n2.擴張產品服務處團隊及人才培育\n3.建立可複製導入SOP，檢核團隊結案績效成效", "highlights": ["從零打造PM團隊: 目前PM團隊擴增人數約4位PM+1位專案助理，人才流失率低。", "建立可複製導入SOP，並與外部TPS顧問合作共同實施專案計畫，大幅降低PM訓練期。"]}];
  let ORDER = 'asc'; // 'asc' | 'desc'
  let __listenersBound = false;

  function formatDate(d){ const dt = new Date(d); return `${dt.getFullYear()}-${String(dt.getMonth()+1).padStart(2,'0')}-${String(dt.getDate()).padStart(2,'0')}`; }

  function groupByYear(list){
    const m = new Map();
    for (const ev of list){
      const y = new Date(ev.date).getFullYear();
      if (!m.has(y)) m.set(y, []);
      m.get(y).push(ev);
    }
    return m;
  }

  function renderTimeline(){
    const data = [...DATA].sort((a,b)=> new Date(a.date) - new Date(b.date));
    const ordered = (ORDER === 'asc') ? data : data.reverse();

    const groups = groupByYear(ordered);
    const years = Array.from(groups.keys()).sort((a,b)=> ORDER==='asc' ? a-b : b-a);

    const root = document.getElementById('timeline-content');
    root.innerHTML = '';
    const frag = document.createDocumentFragment();

    years.forEach(year => {
      const yr = document.createElement('div');
      yr.className = 'yearRow';
      yr.innerHTML = `<div class="year">${year}</div><div class="line"></div>`;
      frag.appendChild(yr);

      const ul = document.createElement('ul');
      ul.className = 'events';

      groups.get(year).forEach(ev=>{
        const li = document.createElement('li');
        li.className = 'item';
        li.dataset.timelineItem = '1';
        li.innerHTML = `
          <div class="dot" aria-hidden="true"></div>
          <div class="card">
            <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:.75rem;">
              <div>
                <h3 class="title">${ev.title}</h3>
                ${(ev.org) ? `<p class="meta">${ev.org}</p>` : ""}
              </div>
              ${(Array.isArray(ev.tags) && ev.tags.length) ? `<div class="tags">${ev.tags.slice(0,3).map(t=>`<span class="tag">${t}</span>`).join('')}</div>` : ""}
            </div>
            ${ev.description ? `<p class="desc">${ev.description}</p>` : ""}
            ${(ev.highlights && ev.highlights.length) ? `<ul class="desc" style="margin:.5rem 0 0; padding-left:1rem;">${ev.highlights.map(h=>`<li>${h}</li>`).join('')}</ul>` : ""}
          </div>
        `;
        ul.appendChild(li);
      });

      frag.appendChild(ul);
    });

    root.appendChild(frag);

    const container = document.querySelector('#timeline');
    const spineGlow = document.querySelector('.spineGlow');
    const marker = document.querySelector('.marker');

    function updateSpineGlow(){
      const rect = container.getBoundingClientRect();
      const visible = Math.max(0, Math.min(rect.bottom, innerHeight) - Math.max(rect.top, 0));
      const ratio = visible / Math.max(1, rect.height);
      spineGlow.style.height = `${ratio * rect.height}px`;
    }
    function updateMarkerToNearest(){
      const items = Array.from(document.querySelectorAll('[data-timeline-item="1"]'));
      if (!items.length) return;
      const vc = innerHeight/2;
      let best = items[0], bestDist = Infinity;
      for (const el of items){
        const r = el.getBoundingClientRect();
        const cy = r.top + r.height/2;
        const d = Math.abs(cy - vc);
        if (d < bestDist){ bestDist = d; best = el; }
      }
      const railTop = container.getBoundingClientRect().top;
      const br = best.getBoundingClientRect();
      const y = (br.top - railTop) + br.height/2;
      marker.style.top = `${y}px`;
    }
    const raf = ()=> requestAnimationFrame(()=>{ updateMarkerToNearest(); });

    updateSpineGlow(); updateMarkerToNearest();
    if (!__listenersBound){
      addEventListener('scroll', raf, {passive:true});
      addEventListener('resize', raf);
      addEventListener('scroll', ()=> requestAnimationFrame(updateSpineGlow), {passive:true});
      addEventListener('resize', updateSpineGlow);
      __listenersBound = true;
    }
  }

  // 時序切換
  const orderToggle = document.getElementById('orderToggle');
  const orderLabel = document.getElementById('orderLabel');
  orderToggle.addEventListener('click', ()=>{
    ORDER = (ORDER === 'asc') ? 'desc' : 'asc';
    orderToggle.dataset.on = (ORDER === 'desc');
    orderToggle.setAttribute('aria-pressed', ORDER === 'desc');
    orderLabel.textContent = (ORDER === 'asc') ? '順序' : '倒序';
    renderTimeline();
    window.dispatchEvent(new Event('resize'));
    window.dispatchEvent(new Event('scroll'));
  });
  </script>
</body>
</html>
