<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>互動式職涯時間軸</title>

  <!-- React / ReactDOM UMD -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Framer Motion UMD -->
  <script src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>

  <!-- Babel Standalone for JSX in browser -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="./timeline.css" />
  <style>
    body{font-family: system-ui,-apple-system,"Microsoft JhengHei",Segoe UI,Roboto,Helvetica,Arial; margin:0; background:#fff; color:#111827;}
    .container{max-width:1120px; margin:0 auto; padding:24px;}
    .card{border:1px solid #e5e7eb; border-radius:16px; padding:16px; background:#fff; box-shadow:0 6px 16px rgba(0,0,0,.06);}
    h1{font-size:24px; margin:0 0 16px 0;}
    .muted{color:#6b7280;}
  </style>
</head>
<body>
  <div class="container">
    <h1>職涯時間軸（React + Framer Motion, 單檔 / 無打包器）</h1>
    <p class="muted">這頁面會讀取 <code>timeline.json</code>，並載入 <code>AnimatedCareerTimeline_umd.jsx</code>。</p>
    <div id="timeline" class="card"></div>
  </div>

  <!-- 你的 UMD 版元件（由 Babel 編譯） -->
  <script type="text/babel" data-presets="env,react" src="./AnimatedCareerTimeline_umd.jsx"></script>

  <!-- Loader：抓 timeline.json 然後渲染 -->
  <script type="text/babel">
    async function loadItems(){
      try{
        const res = await fetch("./timeline.json", { cache: "no-store" });
        if(!res.ok) throw new Error("HTTP "+res.status);
        return await res.json();
      }catch(e){
        console.warn("讀取 timeline.json 失敗，改用空資料或 window.CAREER_EVENTS。", e);
        return window.CAREER_EVENTS || [];
      }
    }
    async function mountTimeline(){
      const items = await loadItems();
      const root = ReactDOM.createRoot(document.getElementById("timeline"));
      const Comp = window.AnimatedCareerTimeline;
      if(!Comp){
        root.render(React.createElement("div", {className:"muted"}, "AnimatedCareerTimeline 尚未載入。"));
        return;
      }
      root.render(React.createElement(Comp, { items }));
    }
    mountTimeline();
  </script>
</body>
</html>
